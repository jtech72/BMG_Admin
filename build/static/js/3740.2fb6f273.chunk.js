"use strict";(self.webpackChunkhyper_react=self.webpackChunkhyper_react||[]).push([[3740],{3740:(e,s,l)=>{l.r(s),l.d(s,{default:()=>w});var i=l(5043),t=l(4556),d=l(3216),n=l(4063),a=l(4282),r=l(8628),o=l(8602),c=l(3519),u=l(3722),m=l(9620),h=l(1072),x=l(2327),v=l(5995),p=l(7881),j=l(4858),g=l(4342),b=l(3767),f=l(9804),N=l(1462),y=l(579);const w=()=>{var e,s,l,w,A,S,z,C,k,T,I,R,P,L,M,F,H,B,W,Y;const{id:D}=(0,d.g)(),{state:U}=(0,d.zy)(),q=(0,t.wA)(),E=(0,d.Zp)(),G=(0,t.d4)(e=>e),O=null===G||void 0===G||null===(e=G.getChatByIdReducer)||void 0===e||null===(s=e.supportData)||void 0===s?void 0:s.chat,_=null===G||void 0===G||null===(l=G.getChatByIdReducer)||void 0===l?void 0:l.loading,Z=null===G||void 0===G||null===(w=G.updateTicketReducer)||void 0===w||null===(A=w.supportData)||void 0===A?void 0:A.status,K=null===G||void 0===G||null===(S=G.updateTicketReducer)||void 0===S?void 0:S.loading,V=(0,p.Ux)(),$=(0,i.useRef)(null),J=(0,i.useRef)(null),Q=(0,i.useRef)(null),X=(null===O||void 0===O?void 0:O.length)-1,{register:ee,handleSubmit:se,reset:le,formState:{errors:ie}}=(0,j.mN)(),[te,de]=(0,i.useState)(""),[ne,ae]=(0,i.useState)(!1),[re,oe]=(0,i.useState)("Medium"),[ce,ue]=(0,i.useState)("Pending");(0,i.useEffect)(()=>{null!==O&&void 0!==O&&O[X]&&(oe(O[X].priority||"Medium"),ue(O[X].status||"Pending"))},[O,X]);const me=()=>{ae(!ne),ne||setTimeout(()=>{var e;null===(e=$.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},100)},he=e=>{switch(null===e||void 0===e?void 0:e.toLowerCase()){case"pending":return"secondary";case"resolved":return"success";case"in progress":return"warning";case"not feasible":return"danger";default:return"info"}};return(0,i.useEffect)(()=>{D&&q((0,v.x5)({id:D}))},[q,D]),(0,i.useEffect)(()=>{200===Z&&(q((0,v.dh)()),q((0,v.x5)({id:D})),le({message:""}),de(""),ae(!1))},[q,D,Z]),_?(0,y.jsx)(g.Rh,{}):(0,y.jsxs)(c.A,{fluid:!0,className:"p-2",style:{minHeight:"100vh"},children:[(0,y.jsxs)(h.A,{className:"align-items-center mb-2",children:[(0,y.jsx)(o.A,{xs:"auto",children:(0,y.jsx)("b",{children:(0,y.jsx)(f.OLK,{onClick:()=>E(-1),className:"p-2 rounded-circle",style:{width:"40px",height:"40px",border:"1px solid #dee2e6"}})})}),(0,y.jsx)(o.A,{children:(0,y.jsx)("h2",{className:"mb-0 fw-semibold",style:{color:"#212529"},children:"Ticket Details"})}),(0,y.jsx)(o.A,{children:(0,y.jsxs)("h4",{className:"text-muted",children:["Ticket: ",null===U||void 0===U?void 0:U.ticketId]})})]}),(0,y.jsxs)(h.A,{className:"g-4",children:[(0,y.jsx)(o.A,{lg:7,children:(0,y.jsxs)(r.A,{className:"h-100 border-0 shadow-sm",children:[(0,y.jsxs)(r.A.Header,{className:"bg-white border-bottom d-flex justify-content-between align-items-center py-3",children:[(0,y.jsx)("h5",{className:"mb-0 fw-semibold",style:{color:"#495057"},children:"Conversation"}),(0,y.jsx)(n.A,{pill:!0,bg:he(null===O||void 0===O||null===(z=O[X])||void 0===z?void 0:z.status),className:"px-3 py-2 text-capitalize",style:{fontSize:"0.75rem"},children:(null===O||void 0===O||null===(C=O[X])||void 0===C?void 0:C.status)||"N/A"})]}),(0,y.jsxs)(r.A.Body,{className:"p-0",style:{height:"500px",overflowY:"auto",backgroundColor:"#f8f9fa"},children:[(0,y.jsx)("div",{ref:J}),null===O||void 0===O?void 0:O.map((e,s)=>{var l,i,t;return(0,y.jsx)("div",{className:"d-flex mb-2 px-3 py-2 "+("sender"===(null===e||void 0===e?void 0:e.messagefrom)?"justify-content-end":"justify-content-start"),children:(0,y.jsxs)("div",{className:"p-2 rounded-3 "+("sender"===(null===e||void 0===e?void 0:e.messagefrom)?"bg-success text-white":"bg-white"),style:{maxWidth:"75%",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",fontSize:"0.875rem"},children:[(0,y.jsxs)("div",{className:"d-flex align-items-center mb-1",children:[(0,y.jsx)("div",{className:"rounded-circle d-flex align-items-center justify-content-center "+("sender"===(null===e||void 0===e?void 0:e.messagefrom)?"bg-white text-dark":"bg-secondary text-light"),style:{width:"28px",height:"28px",fontSize:"0.75rem",fontWeight:"bold",marginRight:"8px"},children:null===e||void 0===e||null===(l=e.userId)||void 0===l||null===(i=l.name)||void 0===i?void 0:i.charAt(0).toUpperCase()}),(0,y.jsxs)("div",{children:[(0,y.jsx)("span",{className:"fw-semibold",children:null===e||void 0===e||null===(t=e.userId)||void 0===t?void 0:t.name}),(0,y.jsx)("small",{className:"ms-2 "+("sender"===(null===e||void 0===e?void 0:e.messagefrom)?"text-white-50":"text-muted"),children:(0,b.Y)((null===e||void 0===e?void 0:e.createdAt)||(null===U||void 0===U?void 0:U.createdAt))})]})]}),(0,y.jsx)("p",{className:"mb-1",style:{lineHeight:"1.4"},children:null===e||void 0===e?void 0:e.description}),(null===e||void 0===e?void 0:e.status)&&(0,y.jsx)("div",{className:"d-flex justify-content-end mt-1",children:(0,y.jsx)(n.A,{bg:he(null===e||void 0===e?void 0:e.status),className:"text-capitalize",style:{fontSize:"0.65rem"},children:null===e||void 0===e?void 0:e.status})})]})},s)}),(0,y.jsx)("div",{ref:$})]}),(0,y.jsx)(r.A.Footer,{className:"bg-white border-top p-3",children:ne?(0,y.jsx)(u.A,{ref:Q,onSubmit:se(e=>{const s={_id:D,issueType:(null===U||void 0===U?void 0:U.issueType)||"",priority:re||"",description:(null===e||void 0===e?void 0:e.message)||"",userId:null===V||void 0===V?void 0:V.id,senderId:null===V||void 0===V?void 0:V.id,status:ce};q((0,v.YY)(s))}),children:(0,y.jsxs)(h.A,{className:"g-2 align-items-end",children:[(0,y.jsx)(o.A,{md:5,children:(0,y.jsxs)(u.A.Group,{controlId:"statusSelect",className:"mb-2",children:[(0,y.jsx)(u.A.Label,{className:"small fw-semibold text-muted mb-1",children:"Status"}),(0,y.jsxs)(u.A.Select,{...ee("status",{required:!0}),value:ce,onChange:e=>ue(e.target.value),className:"border-2",style:{borderWidth:"2px",borderColor:"#e9ecef"},children:[(0,y.jsx)("option",{value:"",disabled:!0,children:"Select Status"}),(0,y.jsx)("option",{value:"Pending",children:"Pending"}),(0,y.jsx)("option",{value:"In Progress",children:"In Progress"}),(0,y.jsx)("option",{value:"Resolved",children:"Resolved"}),(0,y.jsx)("option",{value:"Not Feasible",children:"Not Feasible"}),(0,y.jsx)("option",{value:"Other",children:"Other"})]})]})}),ce&&!["Resolved","NotFeasible"].includes(ce)&&(0,y.jsx)(o.A,{md:5,children:(0,y.jsxs)(u.A.Group,{controlId:"prioritySelect",className:"mb-2",children:[(0,y.jsx)(u.A.Label,{className:"small fw-semibold text-muted mb-1",children:"Priority"}),(0,y.jsxs)(u.A.Select,{...ee("priorityType"),value:re,onChange:e=>oe(e.target.value),className:"border-2",style:{borderWidth:"2px",borderColor:"#e9ecef"},children:[(0,y.jsx)("option",{value:"Critical",children:"Critical"}),(0,y.jsx)("option",{value:"High",children:"High"}),(0,y.jsx)("option",{value:"Medium",children:"Medium"}),(0,y.jsx)("option",{value:"Low",children:"Low"})]})]})}),(0,y.jsx)(o.A,{md:2,className:"text-end mb-2",children:(0,y.jsx)(f.Gsv,{onClick:me,className:"p-1 rounded-circle text-danger",style:{width:"40px",height:"40px",border:"1px solid #dee2e6"}})}),(0,y.jsx)(o.A,{xs:12,children:(0,y.jsx)(u.A.Group,{controlId:"messageTextarea",className:"mb-2",children:(0,y.jsx)(u.A.Control,{as:"textarea",...ee("message",{required:!0}),value:te,onChange:e=>de(e.target.value),placeholder:"Type your message here...",className:"border-2",style:{borderWidth:"2px",borderColor:"#e9ecef",fontSize:"0.875rem",minHeight:"80px",resize:"vertical"}})})}),(0,y.jsx)(o.A,{xs:12,className:"d-flex justify-content-end",children:(0,y.jsx)(a.A,{variant:"success",type:"submit",className:"px-3 py-1 rounded-pill d-flex align-items-center",disabled:K,style:{fontSize:"0.875rem"},children:K?(0,y.jsx)("div",{style:{width:"168px"},children:(0,y.jsx)(g.N7,{})}):(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(f.IkI,{className:"me-2",size:16})," Send Message"]})})})]})}):(0,y.jsx)("div",{className:"d-grid",children:(0,y.jsxs)(a.A,{variant:"outline-success",onClick:me,className:"rounded-pill py-2 d-flex align-items-center justify-content-center",style:{fontSize:"0.875rem"},children:[(0,y.jsx)(f.KcR,{className:"me-2",size:16})," Reply to Ticket"]})})})]})}),(0,y.jsx)(o.A,{lg:5,children:(0,y.jsxs)(r.A,{className:"h-100 border-0 shadow-sm",children:[(0,y.jsx)(r.A.Header,{className:"bg-white border-bottom py-3",children:(0,y.jsx)("h5",{className:"mb-0 fw-semibold",style:{color:"#495057"},children:"Ticket Overview"})}),(0,y.jsxs)(r.A.Body,{className:"p-4",children:[(0,y.jsxs)("div",{className:"mb-4",children:[(0,y.jsxs)("div",{className:"d-flex justify-content-between mb-2",children:[(0,y.jsx)("span",{className:"small fw-semibold text-muted",children:"Ticket Status"}),(0,y.jsx)("span",{className:"small fw-semibold",children:(null===O||void 0===O||null===(k=O[X])||void 0===k?void 0:k.status)||"Pending"})]}),(0,y.jsx)(m.A,{now:(e=>{switch(null===e||void 0===e?void 0:e.toLowerCase()){case"pending":return 25;case"in progress":return 50;case"resolved":case"not feasible":return 100;default:return 0}})(null===O||void 0===O||null===(T=O[X])||void 0===T?void 0:T.status),variant:he(null===O||void 0===O||null===(I=O[X])||void 0===I?void 0:I.status),className:"mb-3",style:{height:"6px",borderRadius:"3px"}})]}),(0,y.jsxs)("div",{className:"mb-4",children:[(0,y.jsx)("h6",{className:"fw-semibold mb-3 text-muted text-uppercase small",children:"Properties"}),(0,y.jsx)(r.A,{className:"border-0 bg-light-subtle",children:(0,y.jsx)(r.A.Body,{className:"p-3",children:(0,y.jsxs)(x.A,{gap:2,children:[(0,y.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,y.jsx)("span",{className:"small text-muted",children:"Module"}),(0,y.jsx)("span",{className:"fw-semibold text-end",style:{fontSize:"0.875rem"},children:(null===U||void 0===U?void 0:U.pageName)||"N/A"})]}),(0,y.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,y.jsx)("span",{className:"small text-muted",children:"Issue Type"}),(0,y.jsx)(n.A,{bg:"info",className:"text-uppercase",style:{fontSize:"0.75rem"},children:(null===U||void 0===U?void 0:U.issueType)||"N/A"})]}),(0,y.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,y.jsx)("span",{className:"small text-muted",children:"Priority"}),(0,y.jsx)(n.A,{bg:(e=>{switch(null===e||void 0===e?void 0:e.toLowerCase()){case"critical":return"dark";case"high":return"danger";case"medium":return"warning";case"low":return"success";default:return"secondary"}})(null===O||void 0===O||null===(R=O[X])||void 0===R?void 0:R.priority),className:"text-capitalize",style:{fontSize:"0.75rem"},children:(null===O||void 0===O||null===(P=O[X])||void 0===P?void 0:P.priority)||"N/A"})]}),(0,y.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,y.jsx)("span",{className:"small text-muted",children:"Created"}),(0,y.jsx)("span",{className:"fw-semibold",style:{fontSize:"0.875rem"},children:(0,b.Y)(null===U||void 0===U?void 0:U.createdAt)})]})]})})})]}),(0,y.jsxs)("div",{className:"mb-4",children:[(0,y.jsx)("h6",{className:"fw-semibold mb-3 text-muted text-uppercase small",children:"Requester"}),(0,y.jsx)(r.A,{className:"border-0 shadow-sm",children:(0,y.jsx)(r.A.Body,{className:"p-3",children:(0,y.jsxs)("div",{className:"d-flex align-items-center",children:[null!==U&&void 0!==U&&null!==(L=U.user)&&void 0!==L&&null!==(M=L.name)&&void 0!==M&&M.charAt(0).toUpperCase()?(0,y.jsx)("div",{className:"rounded-circle d-flex align-items-center justify-content-center bg-success text-white",style:{width:"48px",height:"48px",fontSize:"1rem",fontWeight:"bold"},children:null===U||void 0===U||null===(F=U.user)||void 0===F||null===(H=F.name)||void 0===H?void 0:H.charAt(0).toUpperCase()}):"",(0,y.jsxs)("div",{className:"ms-3",children:[(0,y.jsxs)("h6",{className:"mb-0 fw-semibold",style:{fontSize:"0.9375rem"},children:[null===U||void 0===U||null===(B=U.user)||void 0===B?void 0:B.name," ",(null===U||void 0===U||null===(W=U.user)||void 0===W?void 0:W.lastName)||""]}),(0,y.jsx)("small",{className:"text-muted",style:{fontSize:"0.8125rem"},children:null===U||void 0===U||null===(Y=U.user)||void 0===Y?void 0:Y.email})]})]})})})]}),(0,y.jsxs)("div",{children:[(0,y.jsx)("h6",{className:"fw-semibold mb-3 text-muted text-uppercase small",children:"Attachment"}),null!==U&&void 0!==U&&U.attachment?(0,y.jsxs)(r.A,{className:"border-0 shadow-sm overflow-hidden",children:[(0,y.jsx)("div",{style:{height:"180px",backgroundImage:`url(${null===U||void 0===U?void 0:U.attachment})`,backgroundSize:"cover",backgroundPosition:"center",position:"relative"},children:(0,y.jsx)("div",{className:"w-100 h-100 d-flex align-items-center justify-content-center",style:{backgroundColor:"rgba(0,0,0,0.3)",opacity:0,transition:"opacity 0.2s"},onMouseEnter:e=>e.currentTarget.style.opacity=1,onMouseLeave:e=>e.currentTarget.style.opacity=0,children:(0,y.jsxs)(a.A,{variant:"light",size:"sm",className:"rounded-pill d-flex align-items-center",href:null===U||void 0===U?void 0:U.attachment,target:"_blank",rel:"noopener noreferrer",children:[(0,y.jsx)(f.uSl,{className:"me-1",size:14})," View Full Size"]})})}),(0,y.jsx)(r.A.Footer,{className:"bg-white border-top py-2",children:(0,y.jsx)("small",{className:"text-muted",children:"Attached image"})})]}):(0,y.jsxs)(r.A,{className:"border-0 shadow-sm text-center py-4",children:[(0,y.jsx)(N.Mqx,{size:24,className:"text-muted mb-2"}),(0,y.jsx)("p",{className:"mb-0 text-muted small",children:"No attachments"})]})]})]})]})})]})]})}},3767:(e,s,l)=>{l.d(s,{Y:()=>i});const i=e=>{if(!e)return"";const s=e.replace(/T00:00:00\.000Z*T00:00:00$/,"T00:00:00.000Z"),l=new Date(s);return isNaN(l)?"Invalid Date":l.toLocaleString("en-US",{weekday:"short",month:"short",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0})}}}]);
//# sourceMappingURL=3740.2fb6f273.chunk.js.map