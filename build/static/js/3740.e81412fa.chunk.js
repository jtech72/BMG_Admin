"use strict";(self.webpackChunkhyper_react=self.webpackChunkhyper_react||[]).push([[3740],{3740:(e,s,l)=>{l.r(s),l.d(s,{default:()=>w});var i=l(5043),t=l(4556),d=l(3216),n=l(3519),a=l(1072),r=l(8602),o=l(8628),c=l(4063),m=l(3722),u=l(4282),h=l(9620),x=l(2327),v=l(5717),p=l(7881),j=l(4858),g=l(4342),b=l(3767),f=l(9804),N=l(1462),y=l(579);const w=()=>{var e,s,l,w,A,S,z,k,C,T,I,R,P,L,M,F,H,B;const{id:W}=(0,d.g)(),{state:Y}=(0,d.zy)(),D=(0,t.wA)(),q=(0,d.Zp)(),E=(0,t.d4)((e=>e)),G=null===E||void 0===E||null===(e=E.getChatByIdReducer)||void 0===e||null===(s=e.supportData)||void 0===s?void 0:s.chat,O=null===E||void 0===E||null===(l=E.getChatByIdReducer)||void 0===l?void 0:l.loading,U=null===E||void 0===E||null===(w=E.updateTicketReducer)||void 0===w||null===(A=w.supportData)||void 0===A?void 0:A.status,_=null===E||void 0===E||null===(S=E.updateTicketReducer)||void 0===S?void 0:S.loading,Z=(0,p.Ux)(),K=(0,i.useRef)(null),V=(0,i.useRef)(null),$=(0,i.useRef)(null),J=(null===G||void 0===G?void 0:G.length)-1,{register:Q,handleSubmit:X,reset:ee,formState:{errors:se}}=(0,j.mN)(),[le,ie]=(0,i.useState)(""),[te,de]=(0,i.useState)(!1),[ne,ae]=(0,i.useState)("Medium"),[re,oe]=(0,i.useState)("Pending");(0,i.useEffect)((()=>{null!==G&&void 0!==G&&G[J]&&(ae(G[J].priority||"Medium"),oe(G[J].status||"Pending"))}),[G,J]);const ce=()=>{de(!te),te||setTimeout((()=>{var e;null===(e=K.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),100)},me=e=>{switch(null===e||void 0===e?void 0:e.toLowerCase()){case"pending":return"secondary";case"resolved":return"success";case"in progress":return"warning";case"not feasible":return"danger";default:return"info"}};return(0,i.useEffect)((()=>{W&&D((0,v.x5)({id:W}))}),[D,W]),(0,i.useEffect)((()=>{200===U&&(D((0,v.dh)()),D((0,v.x5)({id:W})),ee({message:""}),ie(""),de(!1))}),[D,W,U]),O?(0,y.jsx)(g.Rh,{}):(0,y.jsxs)(n.A,{fluid:!0,className:"p-2",style:{minHeight:"100vh"},children:[(0,y.jsxs)(a.A,{className:"align-items-center mb-2",children:[(0,y.jsx)(r.A,{xs:"auto",children:(0,y.jsx)("b",{children:(0,y.jsx)(f.OLK,{onClick:()=>q(-1),className:"p-2 rounded-circle",style:{width:"40px",height:"40px",border:"1px solid #dee2e6"}})})}),(0,y.jsx)(r.A,{children:(0,y.jsx)("h2",{className:"mb-0 fw-semibold",style:{color:"#212529"},children:"Ticket Details"})}),(0,y.jsx)(r.A,{children:(0,y.jsxs)("h4",{className:"text-muted",children:["Ticket: ",null===Y||void 0===Y?void 0:Y.ticketId]})})]}),(0,y.jsxs)(a.A,{className:"g-4",children:[(0,y.jsx)(r.A,{lg:7,children:(0,y.jsxs)(o.A,{className:"h-100 border-0 shadow-sm",children:[(0,y.jsxs)(o.A.Header,{className:"bg-white border-bottom d-flex justify-content-between align-items-center py-3",children:[(0,y.jsx)("h5",{className:"mb-0 fw-semibold",style:{color:"#495057"},children:"Conversation"}),(0,y.jsx)(c.A,{pill:!0,bg:me(null===G||void 0===G||null===(z=G[J])||void 0===z?void 0:z.status),className:"px-3 py-2 text-capitalize",style:{fontSize:"0.75rem"},children:(null===G||void 0===G||null===(k=G[J])||void 0===k?void 0:k.status)||"N/A"})]}),(0,y.jsxs)(o.A.Body,{className:"p-0",style:{height:"500px",overflowY:"auto",backgroundColor:"#f8f9fa"},children:[(0,y.jsx)("div",{ref:V}),null===G||void 0===G?void 0:G.map(((e,s)=>{var l,i,t;return(0,y.jsx)("div",{className:"d-flex mb-2 px-3 py-2 "+("sender"===(null===e||void 0===e?void 0:e.messagefrom)?"justify-content-end":"justify-content-start"),children:(0,y.jsxs)("div",{className:"p-2 rounded-3 "+("sender"===(null===e||void 0===e?void 0:e.messagefrom)?"bg-success text-white":"bg-white"),style:{maxWidth:"75%",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",fontSize:"0.875rem"},children:[(0,y.jsxs)("div",{className:"d-flex align-items-center mb-1",children:[(0,y.jsx)("div",{className:"rounded-circle d-flex align-items-center justify-content-center "+("sender"===(null===e||void 0===e?void 0:e.messagefrom)?"bg-white text-dark":"bg-secondary text-light"),style:{width:"28px",height:"28px",fontSize:"0.75rem",fontWeight:"bold",marginRight:"8px"},children:null===e||void 0===e||null===(l=e.userId)||void 0===l||null===(i=l.name)||void 0===i?void 0:i.charAt(0).toUpperCase()}),(0,y.jsxs)("div",{children:[(0,y.jsx)("span",{className:"fw-semibold",children:null===e||void 0===e||null===(t=e.userId)||void 0===t?void 0:t.name}),(0,y.jsx)("small",{className:"ms-2 "+("sender"===(null===e||void 0===e?void 0:e.messagefrom)?"text-white-50":"text-muted"),children:(0,b.Y)((null===e||void 0===e?void 0:e.createdAt)||(null===Y||void 0===Y?void 0:Y.createdAt))})]})]}),(0,y.jsx)("p",{className:"mb-1",style:{lineHeight:"1.4"},children:null===e||void 0===e?void 0:e.description}),(null===e||void 0===e?void 0:e.status)&&(0,y.jsx)("div",{className:"d-flex justify-content-end mt-1",children:(0,y.jsx)(c.A,{bg:me(null===e||void 0===e?void 0:e.status),className:"text-capitalize",style:{fontSize:"0.65rem"},children:null===e||void 0===e?void 0:e.status})})]})},s)})),(0,y.jsx)("div",{ref:K})]}),(0,y.jsx)(o.A.Footer,{className:"bg-white border-top p-3",children:te?(0,y.jsx)(m.A,{ref:$,onSubmit:X((e=>{const s={_id:W,issueType:(null===Y||void 0===Y?void 0:Y.issueType)||"",priority:ne||"",description:(null===e||void 0===e?void 0:e.message)||"",userId:null===Z||void 0===Z?void 0:Z.id,senderId:null===Z||void 0===Z?void 0:Z.id,status:re};D((0,v.YY)(s))})),children:(0,y.jsxs)(a.A,{className:"g-2 align-items-end",children:[(0,y.jsx)(r.A,{md:5,children:(0,y.jsxs)(m.A.Group,{controlId:"statusSelect",className:"mb-2",children:[(0,y.jsx)(m.A.Label,{className:"small fw-semibold text-muted mb-1",children:"Status"}),(0,y.jsxs)(m.A.Select,{...Q("status",{required:!0}),value:re,onChange:e=>oe(e.target.value),className:"border-2",style:{borderWidth:"2px",borderColor:"#e9ecef"},children:[(0,y.jsx)("option",{value:"",disabled:!0,children:"Select Status"}),(0,y.jsx)("option",{value:"Pending",children:"Pending"}),(0,y.jsx)("option",{value:"In Progress",children:"In Progress"}),(0,y.jsx)("option",{value:"Resolved",children:"Resolved"}),(0,y.jsx)("option",{value:"Not Feasible",children:"Not Feasible"}),(0,y.jsx)("option",{value:"Other",children:"Other"})]})]})}),re&&!["Resolved","NotFeasible"].includes(re)&&(0,y.jsx)(r.A,{md:5,children:(0,y.jsxs)(m.A.Group,{controlId:"prioritySelect",className:"mb-2",children:[(0,y.jsx)(m.A.Label,{className:"small fw-semibold text-muted mb-1",children:"Priority"}),(0,y.jsxs)(m.A.Select,{...Q("priorityType"),value:ne,onChange:e=>ae(e.target.value),className:"border-2",style:{borderWidth:"2px",borderColor:"#e9ecef"},children:[(0,y.jsx)("option",{value:"Critical",children:"Critical"}),(0,y.jsx)("option",{value:"High",children:"High"}),(0,y.jsx)("option",{value:"Medium",children:"Medium"}),(0,y.jsx)("option",{value:"Low",children:"Low"})]})]})}),(0,y.jsx)(r.A,{md:2,className:"text-end mb-2",children:(0,y.jsx)(f.Gsv,{onClick:ce,className:"p-1 rounded-circle text-danger",style:{width:"40px",height:"40px",border:"1px solid #dee2e6"}})}),(0,y.jsx)(r.A,{xs:12,children:(0,y.jsx)(m.A.Group,{controlId:"messageTextarea",className:"mb-2",children:(0,y.jsx)(m.A.Control,{as:"textarea",...Q("message",{required:!0}),value:le,onChange:e=>ie(e.target.value),placeholder:"Type your message here...",className:"border-2",style:{borderWidth:"2px",borderColor:"#e9ecef",fontSize:"0.875rem",minHeight:"80px",resize:"vertical"}})})}),(0,y.jsx)(r.A,{xs:12,className:"d-flex justify-content-end",children:(0,y.jsx)(u.A,{variant:"success",type:"submit",className:"px-3 py-1 rounded-pill d-flex align-items-center",disabled:_,style:{fontSize:"0.875rem"},children:_?(0,y.jsx)("div",{style:{width:"168px"},children:(0,y.jsx)(g.N7,{})}):(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(f.IkI,{className:"me-2",size:16})," Send Message"]})})})]})}):(0,y.jsx)("div",{className:"d-grid",children:(0,y.jsxs)(u.A,{variant:"outline-success",onClick:ce,className:"rounded-pill py-2 d-flex align-items-center justify-content-center",style:{fontSize:"0.875rem"},children:[(0,y.jsx)(f.KcR,{className:"me-2",size:16})," Reply to Ticket"]})})})]})}),(0,y.jsx)(r.A,{lg:5,children:(0,y.jsxs)(o.A,{className:"h-100 border-0 shadow-sm",children:[(0,y.jsx)(o.A.Header,{className:"bg-white border-bottom py-3",children:(0,y.jsx)("h5",{className:"mb-0 fw-semibold",style:{color:"#495057"},children:"Ticket Overview"})}),(0,y.jsxs)(o.A.Body,{className:"p-4",children:[(0,y.jsxs)("div",{className:"mb-4",children:[(0,y.jsxs)("div",{className:"d-flex justify-content-between mb-2",children:[(0,y.jsx)("span",{className:"small fw-semibold text-muted",children:"Ticket Status"}),(0,y.jsx)("span",{className:"small fw-semibold",children:(null===G||void 0===G||null===(C=G[J])||void 0===C?void 0:C.status)||"Pending"})]}),(0,y.jsx)(h.A,{now:(e=>{switch(null===e||void 0===e?void 0:e.toLowerCase()){case"pending":return 25;case"in progress":return 50;case"resolved":case"not feasible":return 100;default:return 0}})(null===G||void 0===G||null===(T=G[J])||void 0===T?void 0:T.status),variant:me(null===G||void 0===G||null===(I=G[J])||void 0===I?void 0:I.status),className:"mb-3",style:{height:"6px",borderRadius:"3px"}})]}),(0,y.jsxs)("div",{className:"mb-4",children:[(0,y.jsx)("h6",{className:"fw-semibold mb-3 text-muted text-uppercase small",children:"Properties"}),(0,y.jsx)(o.A,{className:"border-0 bg-light-subtle",children:(0,y.jsx)(o.A.Body,{className:"p-3",children:(0,y.jsxs)(x.A,{gap:2,children:[(0,y.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,y.jsx)("span",{className:"small text-muted",children:"Module"}),(0,y.jsx)("span",{className:"fw-semibold text-end",style:{fontSize:"0.875rem"},children:(null===Y||void 0===Y?void 0:Y.pageName)||"N/A"})]}),(0,y.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,y.jsx)("span",{className:"small text-muted",children:"Issue Type"}),(0,y.jsx)(c.A,{bg:"info",className:"text-uppercase",style:{fontSize:"0.75rem"},children:(null===Y||void 0===Y?void 0:Y.issueType)||"N/A"})]}),(0,y.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,y.jsx)("span",{className:"small text-muted",children:"Priority"}),(0,y.jsx)(c.A,{bg:(e=>{switch(null===e||void 0===e?void 0:e.toLowerCase()){case"critical":return"dark";case"high":return"danger";case"medium":return"warning";case"low":return"success";default:return"secondary"}})(null===G||void 0===G||null===(R=G[J])||void 0===R?void 0:R.priority),className:"text-capitalize",style:{fontSize:"0.75rem"},children:(null===G||void 0===G||null===(P=G[J])||void 0===P?void 0:P.priority)||"N/A"})]}),(0,y.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,y.jsx)("span",{className:"small text-muted",children:"Created"}),(0,y.jsx)("span",{className:"fw-semibold",style:{fontSize:"0.875rem"},children:(0,b.Y)(null===Y||void 0===Y?void 0:Y.createdAt)})]})]})})})]}),(0,y.jsxs)("div",{className:"mb-4",children:[(0,y.jsx)("h6",{className:"fw-semibold mb-3 text-muted text-uppercase small",children:"Requester"}),(0,y.jsx)(o.A,{className:"border-0 shadow-sm",children:(0,y.jsx)(o.A.Body,{className:"p-3",children:(0,y.jsxs)("div",{className:"d-flex align-items-center",children:[(0,y.jsx)("div",{className:"rounded-circle d-flex align-items-center justify-content-center bg-success text-white",style:{width:"48px",height:"48px",fontSize:"1rem",fontWeight:"bold"},children:null===Y||void 0===Y||null===(L=Y.user)||void 0===L||null===(M=L.name)||void 0===M?void 0:M.charAt(0).toUpperCase()}),(0,y.jsxs)("div",{className:"ms-3",children:[(0,y.jsxs)("h6",{className:"mb-0 fw-semibold",style:{fontSize:"0.9375rem"},children:[null===Y||void 0===Y||null===(F=Y.user)||void 0===F?void 0:F.name," ",(null===Y||void 0===Y||null===(H=Y.user)||void 0===H?void 0:H.lastName)||""]}),(0,y.jsx)("small",{className:"text-muted",style:{fontSize:"0.8125rem"},children:null===Y||void 0===Y||null===(B=Y.user)||void 0===B?void 0:B.email})]})]})})})]}),(0,y.jsxs)("div",{children:[(0,y.jsx)("h6",{className:"fw-semibold mb-3 text-muted text-uppercase small",children:"Attachment"}),null!==Y&&void 0!==Y&&Y.attachment?(0,y.jsxs)(o.A,{className:"border-0 shadow-sm overflow-hidden",children:[(0,y.jsx)("div",{style:{height:"180px",backgroundImage:`url(${null===Y||void 0===Y?void 0:Y.attachment})`,backgroundSize:"cover",backgroundPosition:"center",position:"relative"},children:(0,y.jsx)("div",{className:"w-100 h-100 d-flex align-items-center justify-content-center",style:{backgroundColor:"rgba(0,0,0,0.3)",opacity:0,transition:"opacity 0.2s"},onMouseEnter:e=>e.currentTarget.style.opacity=1,onMouseLeave:e=>e.currentTarget.style.opacity=0,children:(0,y.jsxs)(u.A,{variant:"light",size:"sm",className:"rounded-pill d-flex align-items-center",href:null===Y||void 0===Y?void 0:Y.attachment,target:"_blank",rel:"noopener noreferrer",children:[(0,y.jsx)(f.uSl,{className:"me-1",size:14})," View Full Size"]})})}),(0,y.jsx)(o.A.Footer,{className:"bg-white border-top py-2",children:(0,y.jsx)("small",{className:"text-muted",children:"Attached image"})})]}):(0,y.jsxs)(o.A,{className:"border-0 shadow-sm text-center py-4",children:[(0,y.jsx)(N.Mqx,{size:24,className:"text-muted mb-2"}),(0,y.jsx)("p",{className:"mb-0 text-muted small",children:"No attachments"})]})]})]})]})})]})]})}},3767:(e,s,l)=>{l.d(s,{Y:()=>i});const i=e=>{if(!e)return"";const s=e.replace(/T00:00:00\.000Z*T00:00:00$/,"T00:00:00.000Z"),l=new Date(s);return isNaN(l)?"Invalid Date":l.toLocaleString("en-US",{weekday:"short",month:"short",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0})}}}]);
//# sourceMappingURL=3740.e81412fa.chunk.js.map